"use strict";
angular
        .module('chat', [
    
            //module for state routing.
            'ui.router'

        ]);
(function () {
    'use strict';

    angular
        .module('chat')
        .service('chatService', chatService)

    chatService.$inject = ['$q', '$http', 'constantService']

    /** @ngInject */
    function chatService($q, $http, constantService) {

        var vm = this;

        vm.getChats = function () {
            var deferred = $q.defer();
            $http.get(constantService.getUrlChats(), {
                cache: false,
            })
                .success(function (data) {
                    deferred.resolve({error: false, chats: data});
                })
                .error(function (err) {
                    deferred.resolve({error: true, e: err});
                });
            return deferred.promise;
        };

        return {
            getChats: vm.getChats
        };

    }

}());
(function () {
    'use strict';

    angular
        .module('chat')
        .controller('chatController', loginController)

    loginController.$injejct = ['$state', 'chatService', 'constantServiceString', '$rootScope'];

    /** @ngInject */
    function loginController($state, chatService, constantServiceString, $rootScope) {
        var vm = this;
        vm.chats = [];

        vm.getChats = function() {
            chatService.getChats().then(function(data){
                console.log(data);
                vm.chats = data.chats;
            });
        };

        vm.getChats();
    }

} ());
(function () {
    "use strict";

    angular
        .module('chat')
        .factory('utilitiesService', utilitiesService);

    utilitiesService.$inject = [];

    function utilitiesService() {

        var vm = this;

        return {

        }

    }
})();
(function () {
    "use strict";

    angular
        .module('chat')
        .factory('constantServiceString', constantServiceString);

    constantServiceString.$inject = ['$q', '$http'];

    function constantServiceString($q, $http) {

        var vm = this;

        vm.getStrings = getStrings;

        function getStrings() {
            var deferred = $q.defer();
            $http.get('../../strings_spanish.json', {
                cache: true
            }).success(function (data) {
                deferred.resolve(data);
            });
            return deferred.promise;
        }

        return {
            getStrings: vm.getStrings
        }
    }
})();
(function () {
    "use strict";

    angular
        .module('chat')
        .factory('constantService', constantService);

    constantService.$inject = ['$rootScope'];

    function constantService($rootScope) {

        var vm = this;
        //DEVELOP
        vm.endponint = 'http://localhost:3000';

        //PRODUCCION
        //vm.endponint = 'https://pragmachat.herokuapp.com';

        vm.endponint = '';

        vm.getUrlChats = function () {
            return vm.endponint + '/api/getchats';
        };

        return {
            getUrlChats: vm.getUrlChats
        }

    }
})();

"use strict";

angular
    .module('chat')
    .config(routes);

routes.$inject = ['$stateProvider', '$urlRouterProvider', '$httpProvider'];

function routes($stateProvider, $urlRouterProvider, $httpProvider) {

    $stateProvider
        .state('chat', {
            url: '/',
            templateUrl: 'app/features/chat/chat.view.html',
            controller: 'chatController as chatCtrl'
        })

    $urlRouterProvider.otherwise('/')
}
"use strict";

angular
    .module('chat')
    .run(run);

run.$inject = ['$rootScope', '$window'];

function run($rootScope, $window) {

}